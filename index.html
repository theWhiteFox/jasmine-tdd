<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>TDD</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link rel="shortcut icon" type="image/ico" href="favicon.ico" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<div class="slides">
        <!--Intro-->
				<section>
					<h1>Test Driven Development</h1>
					<h3>With Jasmine and Angular</h3>
					<p>
						<small>Tyson Gern <a href="http://twitter.com/tygern">@tygern</a></small>
					</p>
					<div class="pivotal-labs logo"></div>
				</section>

        <section>
          <h2>Introduction</h2>
          <ul>
            <li class="fragment">Software Engineer at Pivotal Labs</li>
            <li class="fragment">100% TDD and Pair Programming</li>
            <li class="fragment">We're new in town</li>
            <li class="fragment">We're hiring! (<a href="http://www.pivotaldublin.com">pivotaldublin.com</a>)</li>
          </ul>
          <div class="pivotal-labs logo"></div>
        </section>

        <section>
          <ul>
            <li>You should be testing your javascript.</li>
            <li class="fragment">TDD results in clean, maintainable code.</li>
            <li class="fragment">Jasmine + AngularJS is a great way to start!</li>
          </ul>
        </section>

        <section>
          <h2>Tools</h2>

          <ul>
            <li class="fragment"><a href="https://github.com/karma-runner/karma-jasmine">karma-jasmine</a> runs javascript tests on the command line</li>
            <li class="fragment">Integrates with popular task runners
              <ul>
                <li><code>gulp</code> — <a href="https://github.com/karma-runner/gulp-karma">gulp-karma</a></li>
                <li><code>grunt</code> — <a href="https://github.com/karma-runner/grunt-karma">grunt-karma</a></li>
              </ul>
            </li>
            <li class="fragment">Yeoman generators
              <ul>
                <li><code>gulp</code> — <a href="https://github.com/Swiip/generator-gulp-angular">generator-gulp-angular</a></li>
                <li><code>grunt</code> — <a href="https://github.com/yeoman/generator-angular">generator-angular</a></li>
              </ul>
            </li>
          </ul>
        </section>

        <!--TDD Basics-->
        <section>
          <h2>What is TDD?</h2>

          <p class="highlight blue">According to Kent Beck...</p>

          <ol>
            <li class="fragment">Don't write a line of new code unless you first have a failing automated test.</li>
            <li class="fragment">Eliminate duplication.</li>
          </ol>
        </section>

        <section>
          <h2>How to practice TDD?</h2>
          <span class="highlight red large fragment" data-fragment-index="1">Red</span>
          <span class="right-arrow large fragment" data-fragment-index="2"></span>
          <span class="highlight green large fragment" data-fragment-index="2">Green</span>
          <span class="right-arrow large fragment" data-fragment-index="3"></span>
          <span class="highlight blue large fragment" data-fragment-index="3">Refactor</span>
          <div class="fragment current-visible display-none" data-fragment-index="1">
            <p>Write a short <strong class="highlight red">failing</strong> test</p>
            <ul>
              <li>Watch your test fail</li>
            </ul>
          </div>
          <div class="fragment current-visible display-none" data-fragment-index="2">
            <p>Make the test pass in the <strong class="highlight green">simplest</strong> way possible</p>
            <ul>
              <li>Nothing too fancy</li>
              <li>Duplicate code, if needed</li>
            </ul>
          </div>
          <div class="fragment current-visible display-none" data-fragment-index="3">
            <p>Eliminate <strong class="highlight blue">duplication</strong> introduced in the previous step</p>
            <ul>
              <li>Improve code without changing behavior</li>
              <li>Don't forget!</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Why practice TDD?</h2>
          <p class="highlight blue">Documents behavior of code</p>
          <ul>
            <li class="fragment">Easy for new developers to join project</li>
            <li class="fragment">Stays up to date, unlike comments</li>
            <!--<div>EXAMPLE</div>-->
          </ul>
        </section>

        <section>
          <h2>Why practice TDD?</h2>
          <p class="highlight blue">Leads to simple design</p>
          <ul>
            <li class="fragment">Solution uses minimal amount of code</li>
            <li class="fragment">Tests are first client of code</li>
          </ul>
        </section>

        <section>
          <h2>Why practice TDD?</h2>
          <p class="highlight blue">Allows refactoring with confidence</p>
          <ul>
            <li class="fragment">Regressions are uncommon</li>
            <li class="fragment">Code improves over time</li>
          </ul>
        </section>

        <section>
          <h2>Why practice TDD?</h2>
          <p class="highlight blue">Reduces number of defects</p>
          <ul>
            <li class="fragment">Maintainable code</li>
            <li class="fragment">Deploy any time</li>
          </ul>
        </section>

        <!--Jasmine-->
        <section>
          <h2>Jasmine</h2>
          <ul>
            <li class="fragment">Testing framework for javascript</li>
            <li class="fragment">Developed by Pivotal Labs</li>
            <li class="fragment">Framework independent</li>
          </ul>
          <div class="jasmine logo"></div>
        </section>

        <section>
          <h2>Example</h2>
          <p>Function <code>addString</code> that adds integers passed as strings.</p>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
        </section>

        <section data-background="#b5533c">
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>

            <code class="failure">
              ReferenceError: addStrings is not defined
            </code>
        </section>

        <section>
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings() {

}
            </code></pre>
        </section>

        <section data-background="#b5533c">
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings() {

}
            </code></pre>

            <code class="failure">
              Expected undefined to equal 8.
            </code>
        </section>

        <section>
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings() {
  return 8;
}
            </code></pre>
        </section>

        <section data-background="#b5533c">
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings() {
  return 8;
}
            </code></pre>

            <code class="failure">
              Expected 8 to equal 10.
            </code>
        </section>

        <section>
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings(first, second) {
  return parseInt(first) + parseInt(second);
}
            </code></pre>
        </section>

        <section data-background="#4d7e65">
          <h2>Make it pass</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  it('correctly adds two numbers', function () {
    expect(addStrings('3', '5')).toEqual(8);
    expect(addStrings('4', '6')).toEqual(10);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings(first, second) {
  return parseInt(first) + parseInt(second);
}
            </code></pre>
        </section>

        <section>
          <h2>Requirement</h2>
          <p>Handle bad data. Count non-numbers as 0.</p>
        </section>

        <section>
          <h2>Add a test</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  //...
  it('treats non-numbers as 0', function () {
    expect(addStrings('a', '6')).toEqual(6);
    expect(addStrings('2', '')).toEqual(2);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings(first, second) {
  return parseInt(first) + parseInt(second);
}
            </code></pre>
        </section>

        <section data-background="#b5533c">
          <h2>Add a test</h2>
            <pre><code class="javascript" data-trim>
describe('addStrings', function () {
  //...
  it('treats non-numbers as 0', function () {
    expect(addStrings('a', '6')).toEqual(6);
    expect(addStrings('2', '')).toEqual(2);
  });
});
            </code></pre>
            <pre><code class="javascript" data-trim>
function addStrings(first, second) {
  return parseInt(first) + parseInt(second);
}
            </code></pre>

          <code class="failure">
            Expected NaN to equal 6.
          </code>
        </section>

        <!--AngularJS-->
        <section>
          <h2>What is Angular?</h2>
          <ul>
            <li class="fragment">Javascript framework for web applications</li>
            <li class="fragment">Developed by Google</li>
            <li class="fragment">It's testable!</li>
            <li class="fragment">Version 1 or 2?</li>
          </ul>
          <div class="angular logo"></div>
        </section>

        <section>
          <h2>2-way binding with <code>$scope</code></h2>

          <p>Angular synchronizes controllers and views with <code>$scope</code>.</p>

          <pre><code class="html" data-trim>
<div ng-controller="messaging.flashController">
  <h2>{{message}}</h2>
</div>
          </code></pre>

          <div class="fragment" data-fragment-index="1">
            <p>+</p>

            <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function ($scope) {
    $scope.message = 'hello';
  });
            </code></pre>
          </div>

          <div class="fragment" data-fragment-index="1">
            <p>=</p>

            <pre><code class="html" data-trim>
<div ng-controller="messaging.flashController">
  <h2>hello</h2>
</div>
            </code></pre>
          </div>
        </section>

        <section>
          <h2>Dependency injection</h2>

          <p>Angular uses dependency injection to provide objects with collaborators.</p>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {

  });
          </code></pre>
        </section>

        <section>
          <h2>Modules</h2>

          <p>Modules allow building application from loosely-coupled, highly-cohesive components.</p>

          <pre><code class="javascript" data-trim>
angular.module('users', []);            //
angular.module('twitterAdapter', []);   //       myApplication
angular.module('messaging', [           //          /     \
  'twitterAdapter'                      //         /       \
]);                                     //        /         \
                                        //   messaging     users
angular.module('myApplication', [       //       |
  'ui.router',                          //       |
  'users',                              //       |
  'messaging'                           //  twitterAdapter
]);                                     //
          </code></pre>
        </section>

        <section>
          <h2>Modules</h2>

          <p>Angular objects</p>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function () {
  });
          </code></pre>

          <p>and tests</p>

          <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  beforeEach(module('messaging'));

  // tests go here
)};
          </code></pre>

          <p>are isolated to a single module.</p>
        </section>

        <section>
          <h2>Dependency injection</h2>

          <p>We can inject <code>$scope</code> in tests</p>

          <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  var $scope;
  beforeEach(module('messaging'));

  beforeEach(inject(function ($rootScope, $controller) {
    $scope = $rootScope.$new();



    $controller('messaging.flashController', {
      $scope: $scope

    });
  }));
  // tests go here
});
            </code></pre>
        </section>

        <section>
          <h2>Dependency injection</h2>

          <p>We can also inject our own mock objects.</p>

          <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  var $scope, messagingService;
  beforeEach(module('messaging'));

  beforeEach(inject(function (..., _messagingService_) {
    $scope = $rootScope.$new();
    messagingService = _messagingService_;
    spyOn(messagingService, 'getMessage').and.returnValue('Hi!');

    $controller('messaging.flashController', {
      $scope: $scope,
      messagingService: messagingService
    });
  }));
  // tests go here
});
            </code></pre>
        </section>

        <section>
          <h2>Example!</h2>
        </section>

        <section>
          <h2>Feature</h2>
          <p>Show initial greeting when the page loads</p>
        </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // setup

  describe('when the controller loads', function () {
    it('sets the message', function () {



    });
  });
});
            </code></pre>
          </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // setup

  describe('when the controller loads', function () {
    it('sets the message', function () {
      expect($scope.message).toEqual('Hi!');


    });
  });
});
            </code></pre>
          </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // setup

  describe('when the controller loads', function () {
    it('sets the message', function () {
      expect($scope.message).toEqual('Hi!');
      expect(messagingService.getMessage)
              .toHaveBeenCalledWith('initial');
    });
  });
});
            </code></pre>
          </section>

          <section data-background="#b5533c">
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // setup

  describe('when the controller loads', function () {
    it('sets the message', function () {
      expect($scope.message).toEqual('Hi!');
      expect(messagingService.getMessage)
              .toHaveBeenCalledWith('initial');
    });
  });
});
            </code></pre>
          </section>

        <section>
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {

  });
          </code></pre>
        </section>

        <section>
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');
  });
          </code></pre>
        </section>

        <section data-background="#4d7e65">
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');
  });
          </code></pre>
        </section>

        <section>
          <h2>Refactor?</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');
  });
          </code></pre>
        </section>

        <section data-background="#4d657e">
          <h2>Refactor?</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');
  });
          </code></pre>
        </section>

          <section>
            <h2>Feature</h2>
            <p>Change the message to prompt the user after 5 seconds</p>
          </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // tests and setup

  describe('after waiting 5 seconds', function () {
    it('shows the \'prompt\' message', function () {










    });
  });
});
            </code></pre>
          </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // tests and setup

  describe('after waiting 5 seconds', function () {
    it('shows the \'prompt\' message', function () {
      $scope.message = '';

      $timeout.flush(4900);
      expect($scope.message).toEqual('');






    });
  });
});
            </code></pre>
          </section>

          <section>
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // tests and setup

  describe('after waiting 5 seconds', function () {
    it('shows the \'prompt\' message', function () {
      $scope.message = '';

      $timeout.flush(4900);
      expect($scope.message).toEqual('');

      $timeout.flush(200);

      expect($scope.message).toEqual('Hi!');
      expect(messagingService.getMessage)
              .toHaveBeenCalledWith('prompt');
    });
  });
});
            </code></pre>
          </section>

          <section data-background="#b5533c">
            <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('messaging.flashController', function () {
  // tests and setup

  describe('after waiting 5 seconds', function () {
    it('shows the \'prompt\' message', function () {
      $scope.message = '';

      $timeout.flush(4900);
      expect($scope.message).toEqual('');

      $timeout.flush(200);

      expect($scope.message).toEqual('Hi!');
      expect(messagingService.getMessage)
              .toHaveBeenCalledWith('prompt');
    });
  });
});
            </code></pre>
          </section>

        <section>
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');




  });
          </code></pre>
        </section>

        <section>
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');

    $timeout(function () {
      $scope.message = messagingService.getMessage('prompt');
    }, 5000);
  });
          </code></pre>
        </section>

        <section data-background="#4d7e65">
          <h2>Make it pass!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');

    $timeout(function () {
      $scope.message = messagingService.getMessage('prompt');
    }, 5000);
  });
          </code></pre>
        </section>

        <section>
          <h2>Refactor?</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    $scope.message = messagingService.getMessage('initial');

    $timeout(function () {
      $scope.message = messagingService.getMessage('prompt');
    }, 5000);
  });
          </code></pre>
        </section>

        <section>
          <h2>Refactor!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    function setMessage(type) {
      $scope.message = messagingService.getMessage(type);
    }

    setMessage('initial');

    $timeout(function () {
      setMessage('prompt');
    }, 5000);
  });
          </code></pre>
        </section>

        <section data-background="#4d657e">
          <h2>Refactor!</h2>

          <pre><code class="javascript" data-trim>
angular.module('messaging')
  .controller('messaging.flashController', function($scope, $timeout,
                                                  messagingService) {
    function setMessage(type) {
      $scope.message = messagingService.getMessage(type);
    }

    setMessage('initial');

    $timeout(function () {
      setMessage('prompt');
    }, 5000);
  });
          </code></pre>
        </section>

        <section>
          <h2>Feature</h2>
          <p>Show the current user</p>
        </section>

        <section>
          <h2>Setup</h2>
            <pre><code class="javascript" data-trim>
describe('users.currentController', function () {
  var $scope, usersService, deferred;
  beforeEach(module('users'));

  beforeEach(inject(function ($rootScope, $controller, $q,
                              _usersService_) {
    $scope = $rootScope.$new();
    usersService = _usersService_;





    $controller('users.currentController', {
      $scope: $scope,
      usersService: usersService
    });
  }));

  // tests go here
});
            </code></pre>
        </section>

        <section>
          <h2>Setup</h2>
            <pre><code class="javascript" data-trim>
describe('users.currentController', function () {
  var $scope, usersService, deferred;
  beforeEach(module('users'));

  beforeEach(inject(function ($rootScope, $controller, $q,
                              _usersService_) {
    $scope = $rootScope.$new();
    usersService = _usersService_;

    deferred = $q.defer();



    $controller('users.currentController', {
      $scope: $scope,
      usersService: usersService
    });
  }));

  // tests go here
});
            </code></pre>
        </section>

        <section>
          <h2>Setup</h2>
            <pre><code class="javascript" data-trim>
describe('users.currentController', function () {
  var $scope, usersService, deferred;
  beforeEach(module('users'));

  beforeEach(inject(function ($rootScope, $controller, $q,
                              _usersService_) {
    $scope = $rootScope.$new();
    usersService = _usersService_;

    deferred = $q.defer();
    spyOn(usersService, 'getCurrent')
      .and.returnValue(deferred.promise);

    $controller('users.currentController', {
      $scope: $scope,
      usersService: usersService
    });
  }));

  // tests go here
});
            </code></pre>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {






  });
});
            </code></pre>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {
    expect($scope.currentUser).toEqual('Loading');





  });
});
            </code></pre>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {
    expect($scope.currentUser).toEqual('Loading');

    deferred.resolve('@walken20');



  });
});
            </code></pre>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {
    expect($scope.currentUser).toEqual('Loading');

    deferred.resolve('@walken20');
    $scope.$apply();


  });
});
            </code></pre>
        </section>

        <section>
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {
    expect($scope.currentUser).toEqual('Loading');

    deferred.resolve('@walken20');
    $scope.$apply();

    expect($scope.currentUser).toEqual('@walken20');
  });
});
            </code></pre>
        </section>

        <section data-background="#b5533c">
          <h2>Add a Test</h2>
            <pre><code class="javascript" data-trim>
describe('when the controller loads', function () {
  it('sets the current user', function () {
    expect($scope.currentUser).toEqual('Loading');

    deferred.resolve('@walken20');
    $scope.$apply();

    expect($scope.currentUser).toEqual('@walken20');
  });
});
            </code></pre>
        </section>

        <section>
          <h2>Make it Pass</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {





  });
            </code></pre>
        </section>

        <section>
          <h2>Make it Pass</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    $scope.currentUser = 'Loading';




  });
            </code></pre>
        </section>

        <section>
          <h2>Make it Pass</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    $scope.currentUser = 'Loading';

    usersService.getCurrent().then(function (result) {
      $scope.currentUser = result;
    });
  });
            </code></pre>
        </section>

        <section data-background="#4d7e65">
          <h2>Make it Pass</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    $scope.currentUser = 'Loading';

    usersService.getCurrent().then(function (result) {
      $scope.currentUser = result;
    });
  });
            </code></pre>
        </section>

        <section>
          <h2>Refactor?</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    $scope.currentUser = 'Loading';

    usersService.getCurrent().then(function (result) {
      $scope.currentUser = result;
    });
  });
            </code></pre>
        </section>

        <section>
          <h2>Refactor!</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    function setCurrentUser(user) {
      $scope.currentUser = user;
    }

    setCurrentUser('Loading');

    usersService.getCurrent().then(setCurrentUser);
  });
            </code></pre>
        </section>

        <section data-background="#4d657e">
          <h2>Refactor!</h2>
            <pre><code class="javascript" data-trim>
angular.module('users')
  .controller('users.currentController', function($scope, usersService) {
    function setCurrentUser(user) {
      $scope.currentUser = user;
    }

    setCurrentUser('Loading');

    usersService.getCurrent().then(setCurrentUser);
  });
            </code></pre>
        </section>

        <section>
          <ul>
            <li class="fragment">TDD results in clean, maintainable code.</li>
            <li class="fragment">You should be testing your javascript.</li>
            <li class="fragment">If you're new to testing javascript, Jasmine + AngularJS is a great way to start!</li>
          </ul>
        </section>

        <section>
          <h1>Thanks!</h1>

          <ul class="top-margin final-words">
            <li>See slides at <a href="http://tygern.github.io/jasmine-tdd">tygern.github.io/jasmine-tdd</a></li>
            <li>Run tests from slides <a href="./tests.html">here</a></li>
          </ul>

          <div class="bottom-logos">
            <div class="pivotal-labs small"></div>
            <div class="jasmine small"></div>
            <div class="angular small"></div>
          </div>
        </section>
      </div>

    </div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				hideAddressBar: true,

				transition: 'none', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
